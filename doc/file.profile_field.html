<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: profile_field
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: profile_field</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><pre class="code ruby"><span class='comment'># -*- coding: utf-8 -*-
</span><span class='kw'>class</span> <span class='const'>ProfileField</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>

  <span class='id identifier rubyid_attr_accessible'>attr_accessible</span>        <span class='symbol'>:label</span><span class='comma'>,</span> <span class='symbol'>:type</span><span class='comma'>,</span> <span class='symbol'>:value</span><span class='comma'>,</span> <span class='symbol'>:key</span>

  <span class='id identifier rubyid_belongs_to'>belongs_to</span>             <span class='symbol'>:profileable</span><span class='comma'>,</span> <span class='label'>polymorphic:</span> <span class='kw'>true</span>

  <span class='comment'># Only allow the type column to be an existing class name.
</span>  <span class='comment'>#
</span>  <span class='id identifier rubyid_validates_each'>validates_each</span> <span class='symbol'>:type</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='comma'>,</span> <span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span> 
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>if</span> <span class='kw'>not</span> <span class='lparen'>(</span> <span class='kw'>defined?</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_constantize'>constantize</span> <span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_constantize'>constantize</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Class</span> <span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ProfileFieldTypes::</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='rparen'>)</span>
        <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a ProfileFieldTypes class.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># There are profile_fields that are composed of other profile_fields.
</span>  <span class='comment'># For example, the BankAccount profile_field type is composed.
</span>  <span class='comment'>#
</span>  <span class='comment'>#   BankAccount
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;Account Holder&quot;
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;Account Number&quot;
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;Bank Code&quot;
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;Credit Institution&quot;
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;IBAN&quot;
</span>  <span class='comment'>#        |------- ProfileField:  :label =&gt; &quot;BIC&quot;
</span>  <span class='comment'>#
</span>  <span class='comment'># You can add this structured ProfileField manually:
</span>  <span class='comment'>#
</span>  <span class='comment'>#    account = ProfileField.create( label: &quot;Bank Account&quot;, type: &quot;BankAccount&quot; )
</span>  <span class='comment'>#    account.children.create( label: &quot;Account Holder&quot;, value: ... )
</span>  <span class='comment'>#    ...
</span>  <span class='comment'>#
</span>  <span class='comment'># Or, you can use the customized `create` method of the specialized class BankAccount,
</span>  <span class='comment'># which inherits from ProfileField, to create a blank BankAccount-type profile_field
</span>  <span class='comment'># with all children auto-created empty.
</span>  <span class='comment'>#
</span>  <span class='comment'>#    account = BankAccount.create( label: &quot;Bank Account&quot; )
</span>  <span class='comment'>#
</span>  <span class='id identifier rubyid_acts_as_tree'>acts_as_tree</span>

  <span class='comment'># Often, profile_fields are to be displayed in a certain manner on a HTML page.
</span>  <span class='comment'># This method returns the profile_field&#39;s value as HTML code in the way
</span>  <span class='comment'># the profile_field should be displayed.
</span>  <span class='comment'>#
</span>  <span class='comment'># Override this in the inheriting classes in ordner to modify the html output
</span>  <span class='comment'># of the value.
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_display_html'>display_html</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>

  <span class='comment'># This method returns the key, i.e. the un-translated label, 
</span>  <span class='comment'># which is needed for child profile fields.
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_key'>key</span>
    <span class='id identifier rubyid_read_attribute'>read_attribute</span> <span class='symbol'>:label</span>
  <span class='kw'>end</span>
  
  <span class='comment'># This method returns the label text of the profile_field.
</span>  <span class='comment'># If a translation exists, the translation is returned instead.
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_label'>label</span>
    <span class='id identifier rubyid_label_text'>label_text</span> <span class='op'>=</span> <span class='kw'>super</span>
    <span class='id identifier rubyid_translated_label_text'>translated_label_text</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_translate'>translate</span><span class='lparen'>(</span> <span class='id identifier rubyid_label_text'>label_text</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_label_text'>label_text</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_label_text'>label_text</span>
  <span class='kw'>end</span>

  <span class='comment'># If the field has children, their values are included in the main field&#39;s value.
</span>  <span class='comment'># Attention! Probably, you want to display only one in the view: The main value or the child fields.
</span>  <span class='comment'># 
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='lparen'>(</span> <span class='lbracket'>[</span> <span class='kw'>super</span> <span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>super</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># This creates an easier way to access a composed ProfileField&#39;s child field
</span>  <span class='comment'># values. Instead of calling
</span>  <span class='comment'>#
</span>  <span class='comment'>#    bank_account.children.where( :label =&gt; :account_number ).first.value
</span>  <span class='comment'>#    bank_account.children.where( :label =&gt; :account_number ).first.value = &quot;12345&quot;
</span>  <span class='comment'>#
</span>  <span class='comment'># you may call
</span>  <span class='comment'>#
</span>  <span class='comment'>#    bank_account.account_number
</span>  <span class='comment'>#    bank_account.account_number = &quot;12345&quot;
</span>  <span class='comment'>#
</span>  <span class='comment'># after telling the profile_field to create these accessors:
</span>  <span class='comment'>#
</span>  <span class='comment'>#    class BankAccount &lt; ProfileField
</span>  <span class='comment'>#      ...
</span>  <span class='comment'>#      has_child_profile_fields :account_holder, :account_number, ...
</span>  <span class='comment'>#      ...
</span>  <span class='comment'>#    end
</span>  <span class='comment'>#
</span>  <span class='comment'># Furthermore, this method modifies the intializer to build the child fields
</span>  <span class='comment'># on build of the main profile_field.
</span>  <span class='id identifier rubyid_extend'>extend</span> <span class='const'>ProfileFieldMixins</span><span class='op'>::</span><span class='const'>HasChildProfileFields</span>

  <span class='comment'># In order to namespace the type classes of the profile_fields, we place them
</span>  <span class='comment'># in a module. In order to be able to use the type column without including
</span>  <span class='comment'># the module, this method makes sure that the module is included in the
</span>  <span class='comment'># type column on save.
</span>  <span class='comment'>#
</span>  <span class='comment'># Both versions should work:
</span>  <span class='comment'>#     ProfileField.create( label: &quot;My Address&quot;, value: &quot;...&quot;, type: &quot;Address&quot; )
</span>  <span class='comment'>#     ProfileField.create( label: &quot;My Address&quot;, value: &quot;...&quot;, type: &quot;ProfileField::Address&quot; )
</span>  <span class='comment'>#
</span>  <span class='comment'># The long version `ProfileField::...` is stored in the database.
</span>  <span class='comment'>#
</span>  <span class='id identifier rubyid_before_save'>before_save</span> <span class='symbol'>:include_module_in_type_column</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_include_module_in_type_column'>include_module_in_type_column</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ProfileFieldTypes::</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>::</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_private'>private</span> <span class='symbol'>:include_module_in_type_column</span>

<span class='kw'>end</span>

<span class='kw'>module</span> <span class='const'>ProfileFieldTypes</span>

  <span class='comment'># General Information Field
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>General</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>end</span>

  

  <span class='comment'># Custom Contact Information
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='comment'># Custom profile_fields are just key-value fields. They don&#39;t have a
</span>  <span class='comment'># sub-structure. They are displayed in the contact section of a profile.
</span>  <span class='comment'>#
</span>  <span class='kw'>class</span> <span class='const'>Custom</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>end</span>


  <span class='comment'># Organisation Membership Information
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='comment'># An organization entry represents the activity of a user in an organization.
</span>  <span class='comment'># Such an entry could be:
</span>  <span class='comment'>#
</span>  <span class='comment'>#    the user is &quot;Lead Singer&quot; of &quot;the Band XYZ&quot; since &quot;May 2007&quot;
</span>  <span class='comment'>#
</span>  <span class='comment'># Therefore, this profile_field has got a sub-structure.
</span>  <span class='comment'>#
</span>  <span class='comment'>#    Organization
</span>  <span class='comment'>#         |--------- ProfileField:  :label =&gt; :organization
</span>  <span class='comment'>#         |--------- ProfileField:  :label =&gt; :role
</span>  <span class='comment'>#         |--------- ProfileField:  :label =&gt; :since_when
</span>  <span class='comment'>#
</span>  <span class='kw'>class</span> <span class='const'>Organization</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='id identifier rubyid_has_child_profile_fields'>has_child_profile_fields</span> <span class='symbol'>:organization</span><span class='comma'>,</span> <span class='symbol'>:role</span><span class='comma'>,</span> <span class='symbol'>:since_when</span>

  <span class='kw'>end</span>


  <span class='comment'># Email Contact Information
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Email</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_display_html'>display_html</span>
      <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_helpers'>helpers</span><span class='period'>.</span><span class='id identifier rubyid_mail_to'>mail_to</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Address Information
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Address</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='comment'># Google Maps integration
</span>    <span class='comment'># see: http://rubydoc.info/gems/gmaps4rails/
</span>    <span class='id identifier rubyid_acts_as_gmappable'>acts_as_gmappable</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_geo_location'>geo_location</span>
      <span class='id identifier rubyid_find_or_create_geo_location'>find_or_create_geo_location</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_find_geo_location'>find_geo_location</span>
      <span class='ivar'>@geo_location</span> <span class='op'>||=</span> <span class='const'>GeoLocation</span><span class='period'>.</span><span class='id identifier rubyid_find_by_address'>find_by_address</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_find_or_create_geo_location'>find_or_create_geo_location</span>
      <span class='ivar'>@geo_location</span> <span class='op'>||=</span> <span class='const'>GeoLocation</span><span class='period'>.</span><span class='id identifier rubyid_find_or_create_by_address'>find_or_create_by_address</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_display_html'>display_html</span>
      <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_helpers'>helpers</span><span class='period'>.</span><span class='id identifier rubyid_simple_format'>simple_format</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

    <span class='comment'># This is needed to display the map later.
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_gmaps4rails_address'>gmaps4rails_address</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_gmaps'>gmaps</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_latitude'>latitude</span> <span class='semicolon'>;</span>      <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:latitude</span>      <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_longitude'>longitude</span> <span class='semicolon'>;</span>     <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:longitude</span>     <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_country'>country</span> <span class='semicolon'>;</span>       <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:country</span>       <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_country_code'>country_code</span> <span class='semicolon'>;</span>  <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:country_code</span>  <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_city'>city</span> <span class='semicolon'>;</span>          <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:city</span>          <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_postal_code'>postal_code</span> <span class='semicolon'>;</span>   <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:postal_code</span>   <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_plz'>plz</span> <span class='semicolon'>;</span>           <span class='id identifier rubyid_geo_information'>geo_information</span> <span class='symbol'>:plz</span>           <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_geo_information'>geo_information</span><span class='lparen'>(</span> <span class='id identifier rubyid_key'>key</span> <span class='rparen'>)</span>
      <span class='id identifier rubyid_geo_location'>geo_location</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span> <span class='id identifier rubyid_key'>key</span> <span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_geocoded?'>geocoded?</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_find_geo_location'>find_geo_location</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@geo_location</span><span class='period'>.</span><span class='id identifier rubyid_geocoded?'>geocoded?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_b'>to_b</span>
    <span class='kw'>end</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_geocode'>geocode</span>
      <span class='kw'>return</span> <span class='ivar'>@geo_location</span><span class='period'>.</span><span class='id identifier rubyid_geocode'>geocode</span> <span class='kw'>if</span> <span class='ivar'>@geo_location</span>
      <span class='kw'>return</span> <span class='ivar'>@geo_location</span><span class='period'>.</span><span class='id identifier rubyid_geocode'>geocode</span> <span class='kw'>if</span> <span class='id identifier rubyid_find_geo_location'>find_geo_location</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_find_or_create_geo_location'>find_or_create_geo_location</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Employment Fields
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Employment</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>
    
    <span class='id identifier rubyid_has_child_profile_fields'>has_child_profile_fields</span> <span class='symbol'>:from</span><span class='comma'>,</span> <span class='symbol'>:to</span><span class='comma'>,</span> <span class='symbol'>:organization</span><span class='comma'>,</span> <span class='symbol'>:position</span><span class='comma'>,</span> <span class='symbol'>:task</span>
    
    <span class='comment'># If the employment instance has no label, just say &#39;Employment&#39;.
</span>    <span class='comment'>#
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_label'>label</span>
      <span class='kw'>super</span> <span class='op'>||</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_translate'>translate</span><span class='lparen'>(</span> <span class='symbol'>:employment</span><span class='comma'>,</span> <span class='label'>default:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Employment</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> 
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_from'>from</span>
      <span class='id identifier rubyid_get_field'>get_field</span><span class='lparen'>(</span><span class='symbol'>:from</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>if</span> <span class='id identifier rubyid_get_field'>get_field</span><span class='lparen'>(</span><span class='symbol'>:from</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_to'>to</span>
      <span class='id identifier rubyid_get_field'>get_field</span><span class='lparen'>(</span><span class='symbol'>:to</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>if</span> <span class='id identifier rubyid_get_field'>get_field</span><span class='lparen'>(</span><span class='symbol'>:to</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>ProfessionalCategory</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Bank Account Information
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>BankAccount</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='id identifier rubyid_has_child_profile_fields'>has_child_profile_fields</span><span class='lparen'>(</span> <span class='symbol'>:account_holder</span><span class='comma'>,</span> <span class='symbol'>:account_number</span><span class='comma'>,</span> <span class='symbol'>:bank_code</span><span class='comma'>,</span>
                              <span class='symbol'>:credit_institution</span><span class='comma'>,</span> <span class='symbol'>:iban</span><span class='comma'>,</span> <span class='symbol'>:bic</span> <span class='rparen'>)</span>

  <span class='kw'>end</span>


  <span class='comment'># Description Field
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='comment'># This fields are used to display any kind of free-text descriptive information.
</span>  <span class='comment'>#
</span>  <span class='kw'>class</span> <span class='const'>Description</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_display_html'>display_html</span>
      <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_helpers'>helpers</span><span class='period'>.</span><span class='id identifier rubyid_simple_format'>simple_format</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Phone Number Field
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Phone</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='id identifier rubyid_before_save'>before_save</span> <span class='symbol'>:auto_format_value</span>

    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_format_phone_number'>format_phone_number</span><span class='lparen'>(</span> <span class='id identifier rubyid_phone_number_str'>phone_number_str</span> <span class='rparen'>)</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_phone_number_str'>phone_number_str</span>

      <span class='comment'># determine wheter this is an international number
</span>      <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='symbol'>:national</span>
      <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='symbol'>:international</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='kw'>or</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>

      <span class='comment'># do only format international numbers, since for national numbers, the country
</span>      <span class='comment'># is unknown and each country formats its national area codes differently.
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_format'>format</span> <span class='op'>==</span> <span class='symbol'>:international</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Phony</span><span class='period'>.</span><span class='id identifier rubyid_normalize'>normalize</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span> <span class='rparen'>)</span> <span class='comment'># remove spaces etc.
</span>        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span> <span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='comment'># because Phony can&#39;t handle leading 00
</span>        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span> <span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span> <span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='comment'># because Phony can&#39;t handle leading +
</span>        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Phony</span><span class='period'>.</span><span class='id identifier rubyid_formatted'>formatted</span><span class='lparen'>(</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='symbol'>:format</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span> <span class='symbol'>:spaces</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='rparen'>)</span>
      <span class='kw'>end</span>
      
      <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_private'>private</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_auto_format_value'>auto_format_value</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Phone</span><span class='period'>.</span><span class='id identifier rubyid_format_phone_number'>format_phone_number</span><span class='lparen'>(</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Homepage Field
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Homepage</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_display_html'>display_html</span>
      <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_starts_with?'>starts_with?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_helpers'>helpers</span><span class='period'>.</span><span class='id identifier rubyid_link_to'>link_to</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>


  <span class='comment'># Date Field
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>Date</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_date_string'>date_string</span> <span class='op'>=</span> <span class='kw'>super</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_date_string'>date_string</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>if</span> <span class='id identifier rubyid_date_string'>date_string</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>


  <span class='comment'># Academic Degree 
</span>  <span class='comment'># ==========================================================================================
</span>
  <span class='kw'>class</span> <span class='const'>AcademicDegree</span> <span class='op'>&lt;</span> <span class='const'>ProfileField</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='const'>ProfileField</span><span class='period'>.</span><span class='id identifier rubyid_model_name'>model_name</span><span class='semicolon'>;</span> <span class='kw'>end</span>

  <span class='kw'>end</span>

<span class='kw'>end</span></pre></div></div>

    <div id="footer">
  Generated on Sat Mar 23 00:23:00 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>
